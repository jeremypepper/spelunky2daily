{"version":3,"sources":["DayHistogram.js","api.js","Day.js","Player.js","Leaderboards.jsx","reportWebVitals.js","index.js","../aws/utils.js"],"names":["getLevelButGroupOcean","playerDayData","level","getLevel","Histogram","props","dayData","worldNumbers","_","countBy","data","maxLevel","max","keys","map","number","Number","parseInt","i","options","chart","type","plotOptions","column","colorByPoint","series","minPointLength","colors","title","text","credits","enabled","legend","yAxis","xAxis","min","tickPositions","labels","formatter","levelDefinition","getLevelDefinition","this","value","toString","crosshair","name","tooltip","x","worldName","y","Chart","highcharts","Highcharts","baseUrl","window","location","hostname","fetchPath","path","fetch","DayTable","classes","makeStyles","table","minWidth","useStyles","filterCount","take","tableRows","player","levelData","uniqueIdEncoded","encodeURIComponent","getPlayerUniqueId","platform","id","TableRow","TableCell","href","getPlatformName","percentile","toFixed","uniqueId","TableContainer","component","Paper","Table","className","size","TableHead","TableBody","Day","useState","setFilterCount","latestDate","lastDayJSON","getFormattedDayDelta","formattedDay","delta","nextDate","DateTime","fromMillis","parseDate","plus","days","nextDay","toUTC","toFormat","includes","dates","doesDayHaveData","showAll","setDayData","day","useEffect","then","response","json","previousDay","getFormattedPreviousDay","getFormattedNextDay","previousDayElement","nextDayElement","onClick","require","Player","playerData","setPlayerData","percentilesByDate","setPercentilesByDate","d","newPercentilesByDate","createRow","label","dataByDay","summaryRows","rankSummary","percentileSummary","median","dayRows","scoreData","dataDay","date","score","runframes","rank","createDayRow","chartData","reverse","p25Series","p50Series","p75Series","p80Series","p90Series","p95Series","p99Series","forEach","zone","dataForDate","push","headerFormat","pointFormat","dateFormat","Date","color","dashStyle","getPlayerPlatformFromUniqueId","platformName","Leaderboards","console","log","maxPlayers","Math","length","totalScore","j","tenDayLevelsReached","pow","filter","sortBy","rows","index","scoreDays","dayScore","scoreDay","style","whiteSpace","width","colSpan","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","a","urlParams","URLSearchParams","search","get","app","ReactDOM","render","StrictMode","document","getElementById","getDateAndGo","platformId","LevelDefintion","world","sublevel","module","exports","dateText","fromFormat","valueOf","levelNumber","split"],"mappings":"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","file":"static/js/main.a31bc6eb.chunk.js","sourcesContent":["import _ from \"lodash\";\nimport HighchartsReact from \"highcharts-react-official\";\nimport Highcharts from \"highcharts\";\nimport React from \"react\";\nimport {getLevelDefinition} from \"./utils\";\n\nconst getLevel = (playerDayData) => playerDayData.level;\nfunction getLevelButGroupOcean(playerDayData) {\n  const level = getLevel(playerDayData);\n  return level > 23 ? 23 : level;\n}\n\nfunction getWorldNumberBuckets(dayData) {\n  return _.countBy(dayData, getLevelButGroupOcean);\n}\n\nexport default function Histogram(props) {\n  if (!props.dayData) {\n    return null;\n  }\n  const worldNumbers = getWorldNumberBuckets(props.dayData);\n  const data = [0];\n  const maxLevel = _.max(_.keys(worldNumbers).map(number => Number.parseInt(number, 10)))\n  for (let i = 1; i <= maxLevel; i++) {\n    data[i] = worldNumbers[i] || 0;\n  }\n  const options = {\n    chart: {\n      type: 'column'\n    },\n    plotOptions: {\n      column: {\n        colorByPoint: true\n      },\n      series: {\n        minPointLength: 3\n      }\n    },\n    colors: [\n      '#8B786D',\n      '#8B786D',\n      '#8B786D',\n      '#8B786D',\n      '#8B786D',\n      '#590925',\n      '#590925',\n      '#590925',\n      '#590925',\n      '#F6AA1C',\n      '#16425B',\n      '#16425B',\n      '#16425B',\n      '#16425B',\n      '#78A1BB',\n      '#DAD4EF',\n      '#DAD4EF',\n      '#DAD4EF',\n      '#DAD4EF',\n      '#9CDE9F',\n      '#9CDE9F',\n      '#9CDE9F',\n      '#9CDE9F',\n      '#002626',\n    ],\n    title: {text:\"Maximum World Reached\"},\n    credits: {\n      enabled: false\n    },\n    legend:{\n      enabled:false,\n    },\n    yAxis: {\n      title: { text: \"Number of Players\" }\n    },\n    xAxis: {\n      min: 1,\n      max: 23,\n      tickPositions: [1, 5, 9, 10, 14, 15, 19, 23],\n      labels: {\n        formatter: function() {\n          const levelDefinition = getLevelDefinition(this.value);\n          if (levelDefinition.value === 23) {\n            return \"ocean\";\n          }\n          return `${levelDefinition.toString()}`\n        }\n      },\n      crosshair: true\n    },\n    series: [{\n      name: 'WorldEntered',\n      data: data,\n    }],\n    tooltip: {\n      formatter: function() {\n        const levelDefinition = getLevelDefinition(this.x);\n        return `${levelDefinition.worldName} ${levelDefinition.toString()}<br/>${this.y} players`\n      }\n    }\n  }\n\n  const Chart = () => <div>\n    <HighchartsReact\n        highcharts={Highcharts}\n        options={options}\n    />\n  </div>\n  return <Chart />;\n}\n","const baseUrl =  (window.location.hostname === \"localhost\")\n    ? \"http://localhost:8010/proxy\"\n    : \"https://spelunky2daily.s3-us-west-2.amazonaws.com\"\nexport function fetchPath(path) {\n  return fetch(baseUrl + path);\n}\n\nexport function fetchPlayer(uniqueId) {\n  return fetch(\"https://q4hpqdiprh.execute-api.us-west-2.amazonaws.com/prod/player?uniqueid=\"\n      + window.encodeURIComponent(uniqueId))\n      .then((response) => response.json())\n      .then(data=>data?.data)\n}\n","import \"./App.css\";\nimport _ from 'lodash';\nimport React, { useEffect, useState } from \"react\";\nimport { DateTime } from \"luxon\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Table from \"@material-ui/core/Table\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport makeStyles from \"@material-ui/core/styles/makeStyles\";\nimport {TableBody} from \"@material-ui/core\";\n\nimport {getLevelDefinition, getPlatformName, getPlayerUniqueId, parseDate} from \"./utils\";\nimport Histogram from \"./DayHistogram\";\nimport {fetchPath} from \"./api\";\n\nfunction formatDay(date) {\n  return date.toUTC().toFormat(\"yyyy-MM-dd\");\n}\n\nfunction DayTable(props) {\n  const useStyles = makeStyles({\n    table: {\n      minWidth: 650,\n    },\n  });\n  const classes = useStyles();\n  if (!props.dayData) {\n    return null;\n  }\n  const data = props.filterCount ? _.take(props.dayData, props.filterCount) : props.dayData;\n\n  const tableRows = _.map(data, player => {\n    const levelData = getLevelDefinition(player.level)\n    const uniqueIdEncoded = window.encodeURIComponent(getPlayerUniqueId(player.platform, player.id))\n    return <TableRow key={player.uniqueId}>\n      <TableCell>\n        <a href={`?player=${uniqueIdEncoded}`}>{player.name}</a>\n      </TableCell>\n      <TableCell>{getPlatformName(player.platform)}</TableCell>\n      <TableCell>{levelData.toString()}</TableCell>\n      <TableCell>{player.percentile.toFixed(2)}</TableCell>\n    </TableRow>;\n  })\n\n  return (\n    <div>\n      <TableContainer component={Paper}>\n        <Table className={classes.table} size={\"small\"}>\n          <TableHead>\n            <TableRow>\n              <TableCell>Name</TableCell>\n              <TableCell>Platform</TableCell>\n              <TableCell>Level</TableCell>\n              <TableCell>Percentile</TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {tableRows}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </div>\n  );\n}\n\nfunction Day(props) {\n  const [filterCount, setFilterCount] = useState(100);\n  const latestDate = window.lastDayJSON;\n  function doesDayHaveData(formattedDay) {\n    return _.includes(latestDate.dates, formattedDay);\n  }\n  function getFormattedDayDelta(formattedDay, delta) {\n    const nextDate = DateTime.fromMillis(parseDate(formattedDay)).plus({days: delta});\n    const nextDay = formatDay(nextDate)\n    return doesDayHaveData(nextDay) ? nextDay : null;\n  }\n\n  function getFormattedPreviousDay(formattedDay) {\n    return getFormattedDayDelta(formattedDay, -1);\n  }\n\n  function getFormattedNextDay(formattedDay) {\n    return getFormattedDayDelta(formattedDay, 1);\n  }\n\n  function showAll() {\n    setFilterCount(null);\n  }\n\n  const [dayData, setDayData] = useState(null);\n  const formattedDay = props.day;\n\n  useEffect(() => {\n    fetchPath( \"/processeddates/\" + formattedDay + \".json\")\n      .then((response) => response.json())\n      .then((data) => {\n        setDayData(data);\n      });\n  }, [formattedDay]);\n  const previousDay = getFormattedPreviousDay(formattedDay);\n  const nextDay = getFormattedNextDay(formattedDay);\n  const previousDayElement = previousDay\n      ? <a href={\"?day=\" + previousDay}>Previous Day</a>\n      : null;\n  const nextDayElement = nextDay\n      ? <a href={\"?day=\" + nextDay}>Next Day</a>\n      : null;\n  return (\n    <div className=\"App\">\n      <header>\n        <div className=\"main\">Daily Challenge for {formattedDay}</div>\n        <div className=\"subtitle\">Data Provided by {\" \"}\n          <a href=\"http://vdzserver.org/spelunky2\">http://vdzserver.org/spelunky2</a>\n        </div>\n        <nav className=\"day-nav\">\n          {previousDayElement}\n          {nextDayElement}\n          <a href=\"?path=leaderboards\">Leaderboards</a>\n        </nav>\n      </header>\n      <div className=\"histogram-wrapper\">\n        <Histogram dayData={dayData} />\n      </div>\n      {\n        filterCount\n            ? <div className=\"filterbar\">Showing Top 100 players <button onClick={showAll}>Show All</button></div>\n            : null\n      }\n      <DayTable dayData={dayData} filterCount={filterCount}/>\n      {\n        filterCount\n          ? <div className=\"filterbar\">Showing Top 100 players <button onClick={showAll}>Show All</button></div>\n          : null\n      }\n    </div>\n  );\n}\n\nexport default Day;\n","import \"./Player.css\";\nimport React, { useEffect, useState } from \"react\";\nimport Table from \"@material-ui/core/Table\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport {TableBody} from \"@material-ui/core\";\nimport _ from 'lodash';\nimport Highcharts from 'highcharts';\nimport HighchartsReact from 'highcharts-react-official'\nimport {parseDate, getLevelDefinition, getPlayerPlatformFromUniqueId} from \"./utils\";\nimport {fetchPath, fetchPlayer} from \"./api\";\n\nconst {DateTime} = require(\"luxon\");\n\nfunction Player(props) {\n  const [playerData, setPlayerData] = useState(null);\n  const [percentilesByDate, setPercentilesByDate] = useState(null);\n  const player = props.player;\n\n  useEffect(() => {\n    fetchPlayer(player)\n      .then((data) => {\n        setPlayerData(data);\n      });\n  }, [player]);\n  useEffect(()=> {\n    fetchPath(\"/percentilesByDate.json\")\n        .then(d=>d.json())\n        .then(newPercentilesByDate=> setPercentilesByDate(newPercentilesByDate))\n  },[])\n\n  if (!playerData) {\n    return null;\n  }\n\n  function createRow(label, value) {\n    return <TableRow>\n      <TableCell>{label}</TableCell>\n      <TableCell>{value}</TableCell>\n    </TableRow>;\n  }\n\n  function createDayRow(date, dayData) {\n    return <TableRow>\n      <TableCell>{date}</TableCell>\n      <TableCell>{getLevelDefinition(dayData.level).toString()}</TableCell>\n      <TableCell>{dayData.score}</TableCell>\n      <TableCell>{(dayData.runframes / 60).toFixed(3)}</TableCell>\n      <TableCell>{dayData.rank}</TableCell>\n      <TableCell>{dayData.percentile.toFixed(2)}</TableCell>\n    </TableRow>;\n  }\n\n  const summaryRows = [\n    createRow(\"Best Rank\", `${playerData.rankSummary.min} (${playerData.percentileSummary.max.toFixed(2)})%`),\n    createRow(\"Median Rank\", `${playerData.rankSummary.median} (${playerData.percentileSummary.median.toFixed(2)})%`),\n  ];\n  const dayRows = _.map(playerData.scoreData, (dataDay, date) => {\n    return createDayRow(date, dataDay);\n  })\n\n  function getChartData(dataByDay) {\n    return _.map(dataByDay, (dayData, day) => {\n      return [parseDate(day), dayData.level];\n    }).reverse();\n  }\n\n  const chartData = getChartData(playerData.scoreData, percentilesByDate);\n  const p25Series = [];\n  const p50Series = [];\n  const p75Series = [];\n  const p80Series = [];\n  const p90Series = [];\n  const p95Series = [];\n  const p99Series = [];\n  _.forEach(chartData, (data) => {\n    const date = DateTime.fromMillis(data[0], {zone: 'UTC'})\n    // const date = new Date(key)\n    const dataForDate = percentilesByDate[date.toString()];\n    if (dataForDate) {\n      p25Series.push([data[0], dataForDate[\"p25\"]]);\n      p50Series.push([data[0], dataForDate[\"p50\"]]);\n      p75Series.push([data[0], dataForDate[\"p75\"]]);\n      p80Series.push([data[0], dataForDate[\"p80\"]]);\n      p90Series.push([data[0], dataForDate[\"p90\"]]);\n      p95Series.push([data[0], dataForDate[\"p95\"]]);\n      p99Series.push([data[0], dataForDate[\"p99\"]]);\n    }\n  })\n  const options = {\n    credits: {\n      enabled: false\n    },\n    chart: {\n      type: 'spline'\n    },\n    title: {\n      text: 'Depth Over Time'\n    },\n    tooltip: {\n      headerFormat: '<b>{series.name}</b><br>',\n      pointFormat: '{point.x:%m-%d}: {point.y}',\n      formatter: function() {\n        const levelDefinition = getLevelDefinition(this.y);\n        const date = Highcharts.dateFormat('%m-%d-%Y', new Date(this.x))\n        return `${date} <br/>${levelDefinition.worldName} ${levelDefinition.toString()}<br/>`\n      }\n    },\n    xAxis: {\n      type: 'datetime',\n      title: {\n        text: 'Daily'\n      }\n    },\n    yAxis: {\n      title: {\n        text: 'Depth (floors reached)'\n      },\n      min: 1,\n      labels: {\n        formatter: function() {\n          const levelDefinition = getLevelDefinition(this.value);\n          if (levelDefinition.value === 23) {\n            return \"ocean\";\n          }\n          return `${levelDefinition.toString()}`\n        }\n      },\n\n    },\n    legend:{\n      enabled: true,\n    },\n    series: [{\n      name: playerData.name,\n      data: chartData\n    },\n    //   {\n    //   name: \"25th percentile\",\n    //   data: p25Series,\n    //   dashStyle: 'ShortDash',\n    // },\n      {\n      name: \"50th percentile (avg score of all players)\",\n      color: \"#DDDDDD\",\n      dashStyle: 'ShortDash',\n      data: p50Series,\n    },\n      // {\n    //   name: \"75th percentile\",\n    //     selected: false,\n    //     color: \"#CCFFFF\",\n    //     dashStyle: 'ShortDash',\n    //   data: p75Series,\n    // }, {\n    //   name: \"90th percentile\",\n    //     selected: false,\n    //     color: \"#CCFFCC\",\n    //   data: p90Series,\n    // }\n    // , {\n    //   name: \"95th percentile\",\n    //   data: p95Series,\n    // }, {\n    //   name: \"99th percentile\",\n    //   data: p99Series,\n    // }\n    ]\n  }\n  const Chart = () => <div>\n    <HighchartsReact\n        highcharts={Highcharts}\n        options={options}\n    />\n  </div>\n\n  return (\n    <div>\n      <div className=\"title\">{playerData.name} <span className=\"platformname\">{getPlayerPlatformFromUniqueId(playerData.uniqueId).platformName}</span></div>\n      <Table>\n        <TableBody>\n          {summaryRows}\n        </TableBody>\n      </Table>\n      <Chart />\n      <Table>\n        <TableHead>\n          <TableCell>date</TableCell>\n          <TableCell>level</TableCell>\n          <TableCell>score</TableCell>\n          <TableCell>time</TableCell>\n          <TableCell>rank</TableCell>\n          <TableCell>percentile</TableCell>\n        </TableHead>\n        <TableBody>\n          {dayRows}\n        </TableBody>\n      </Table>\n    </div>\n  );\n}\n\nexport default Player;\n","\nimport React, { useEffect, useState } from \"react\";\nimport {fetchPath} from \"./api\";\nimport {TableBody, TableHead} from \"@material-ui/core\";\nimport Table from \"@material-ui/core/Table\";\nimport _ from 'lodash';\nimport TableRow from \"@material-ui/core/TableRow\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport {getLevelDefinition} from \"./utils\";\n\nconst DECAY_CONST = 0.9;\nexport default function Leaderboards() {\n  const [playerData, setPlayerData] = useState(null);\n\n  useEffect(()=> {\n    fetchPath(\"/tenDayLevelScoreList.json\")\n        .then(d=>d.json())\n        .then(data => {\n          console.log(\"processingdata\");\n          const maxPlayers = Math.min(data.length, 1000);\n          for (let i = 0; i < maxPlayers; i++) {\n            const player = data[i];\n            // const scores = [];\n            let totalScore = 0;\n            for (let j = 0; j < player.tenDayLevelsReached.length; j++) {\n              const level = player.tenDayLevelsReached[j];\n              if (level) {\n                totalScore += level * Math.pow(DECAY_CONST, j);\n              }\n            }\n\n            // append total score\n            player.totalScore = totalScore;\n            if(i % 100 ===0)\n              console.log('processing progress ' + i);\n          }\n          return _(data).filter(\"totalScore\").sortBy(\"totalScore\").reverse().value();\n        })\n        .then(data => {\n          console.log(\"setplayerdata\");\n          return setPlayerData(data)\n        })\n  },[])\n\n  const rows = _(playerData)\n      .map((player, index)=> {\n    const scoreDays = _.map(player.tenDayLevelsReached, (dayScore) => {\n      const s = getLevelDefinition(dayScore)\n      return s.toString()\n    })\n    return <TableRow key={player.uniqueId}>\n      <TableCell>\n        {index+1}\n      </TableCell>\n      <TableCell>\n        {player.name}\n      </TableCell>\n      <TableCell>\n        {\n          player.totalScore.toFixed(2)\n        }\n      </TableCell>\n      {_.map(scoreDays, (scoreDay, i)=> {\n        debugger;\n        return <TableCell key={player.uniqueId + i} style={{whiteSpace: \"nowrap\"}}>\n          {scoreDay}\n        </TableCell>\n      })}\n    </TableRow>\n  }).value();\n\n  console.log(\"render?\")\n  return (<div>\n    <header>\n      Spelunky 2 Leaderboards\n      <div className=\"subtitle\">Calculated using the last 10 days. More recent days have a higher influence on total score</div>\n    </header>\n    <div style={{width: 1024}}>\n      <Table size=\"small\">\n        <TableHead>\n          <TableRow>\n            <TableCell>Rank</TableCell>\n            <TableCell>Player</TableCell>\n            <TableCell>Total Ten Day Score</TableCell>\n            <TableCell colSpan={10}>Results</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {rows}\n        </TableBody>\n      </Table>\n      <footer></footer>\n    </div>\n  </div>);\n}\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport Day from \"./Day\";\nimport Player from \"./Player\";\nimport Leaderboards from \"./Leaderboards\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport {fetchPath} from \"./api\";\n\n\nasync function getDateAndGo() {\n  window.lastDayJSON = await fetchPath(\"/latest-date.json\")\n      .then((response) => response.json());\n\n  const urlParams = new URLSearchParams(window.location.search);\n  let app;\n  const player = urlParams.get(\"player\");\n  const path = urlParams.get(\"path\");\n  const day = urlParams.get(\"day\") || window.lastDayJSON.date;\n  if (player) {\n    app = <Player player={player}/>;\n  } else if (path === \"leaderboards\") {\n    app = <Leaderboards />;\n  } else {\n    app = <Day day={day} />;\n  }\n\n  ReactDOM.render(\n      <React.StrictMode>{app}</React.StrictMode>,\n      document.getElementById(\"root\")\n  );\n}\ngetDateAndGo();\n\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","const {DateTime} = require(\"luxon\");\n\nfunction parseDate(dateText) {\n  const date = DateTime.fromFormat(dateText, \"yyyy-MM-dd\", {zone: 'utc'}).valueOf()\n  return date;\n}\n\n\nfunction getPlayerUniqueId(platform, id) {\n  return `${platform}|${id}`;\n}\n\nfunction getPlayerPlatformFromUniqueId(uniqueId) {\n  const [platform, player] =  uniqueId.split(\"|\");\n  return {player, platform, platformName: getPlatformName(platform)};\n}\n\nfunction getPlatformName(platformId) {\n  return Number.parseInt(platformId, 10) === 18 ? \"Steam\" : \"Playstation\"\n}\n\nclass LevelDefintion {\n  constructor(value, world, sublevel, worldName) {\n    this.value = value;\n    this.world = world;\n    this.sublevel = sublevel;\n    this.worldName = worldName;\n  }\n\n  toString() {\n    if (this.world ===0 && this.sublevel === 0) {\n      return \"\"\n    } else {\n      return `${this.world}-${this.sublevel}`\n    }\n  }\n}\n\nfunction getLevelDefinition(levelNumber) {\n  if (levelNumber == null) {\n    return new LevelDefintion(0, 0, 0, \"\");\n  } else if (levelNumber <= 4) {\n    return new LevelDefintion(levelNumber, 1, levelNumber, \"dwelling\");\n    // return {\n    //   world: 1,\n    //   sublevel: levelNumber,\n    //   worldName: \"dwelling\"\n    // }\n  } else if (levelNumber <= 8) {\n    // volcana/jungle\n    return new LevelDefintion(levelNumber, 2,levelNumber - 4, \"volcana/jungle\");\n  } else if (levelNumber === 9) {\n    // olmec\n    return new LevelDefintion(levelNumber,\n      3,\n      1,\n      \"olmec\"\n    );\n  } else if (levelNumber <= 13) {\n    return new LevelDefintion(levelNumber,\n      4,\n      levelNumber - 9,\n      \"tidepool/temple\");\n  } else if (levelNumber <= 14) {\n    // ice caves\n    return new LevelDefintion(levelNumber,\n      5,\n      1,\n      \"icecaves\"\n    );\n  } else if (levelNumber <= 18) {\n    // disco babylon\n    return new LevelDefintion(levelNumber,\n      6,\n      levelNumber - 14,\n      \"neobabylon\"\n    );\n  } else if (levelNumber <= 22) {\n    return new LevelDefintion(levelNumber,\n      7,\n      levelNumber - 18,\n      \"sunkencity\"\n    );\n  } else {\n    // cosmic ocean\n    return new LevelDefintion(levelNumber,\n      7,\n      levelNumber - 18,\n      \"cosmic ocean\"\n    );\n  }\n}\n\nmodule.exports =  {\n  parseDate,\n  getLevelDefinition,\n  getPlayerUniqueId,\n  getPlatformName,\n  getPlayerPlatformFromUniqueId\n}\n"],"sourceRoot":""}