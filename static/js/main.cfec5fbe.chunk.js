(this["webpackJsonpspelunky2-daily-leaderboards"]=this["webpackJsonpspelunky2-daily-leaderboards"]||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);var a=n(47),r=n.n(a),c=n(57),l=n(2),i=n(1),s=n.n(i),o=n(58),d=n.n(o),j=(n(78),n(40)),u=(n(79),n(10)),h=n.n(u),b=n(63),x=n(124),m=n(119),O=n(120),f=n(121),p=n(122),y=n(118),v=n(59),w=n.n(v),D=n(123),N=n(19),g=n(33),k=n.n(g),F=n(26),S=n.n(F);function P(e){var t=function(e){return e.level}(e);return t>23?23:t}function M(e){if(!e.dayData)return null;for(var t,n=(t=e.dayData,h.a.countBy(t,P)),a=[0],r=h.a.max(h.a.keys(n).map((function(e){return Number.parseInt(e,10)}))),c=1;c<=r;c++)a[c]=n[c]||0;var i={chart:{type:"column"},title:{text:"Maximum World Reached"},credits:{enabled:!1},legend:{enabled:!1},yAxis:{title:"Number of Players"},xAxis:{min:1,max:23,labels:{formatter:function(){var e=Object(N.getLevelDefinition)(this.value);return 23===this.value?"ocean":"".concat(e.world,"-").concat(e.sublevel)}},crosshair:!0},series:[{name:"WorldEntered",data:a}]},s=function(){return Object(l.jsx)("div",{children:Object(l.jsx)(k.a,{highcharts:S.a,options:i})})};return Object(l.jsx)(s,{})}var A="localhost"===window.location.hostname?"http://localhost:8010/proxy":"https://spelunky2daily.s3-us-west-2.amazonaws.com";function L(e){return fetch(A+e)}function T(e){var t=w()({table:{minWidth:650}})();if(!e.dayData)return null;var n=h.a.map(e.dayData,(function(e){return Object(l.jsxs)(y.a,{children:[Object(l.jsx)(x.a,{children:Object(l.jsx)("a",{href:"?player=".concat(e.name),children:e.name})}),Object(l.jsx)(x.a,{children:18===e.platform?"Steam":"Playstation"}),Object(l.jsx)(x.a,{children:e.level}),Object(l.jsx)(x.a,{children:e.percentile.toFixed(2)})]},e.id)}));return Object(l.jsx)("div",{children:Object(l.jsx)(m.a,{component:O.a,children:Object(l.jsxs)(f.a,{className:t.table,size:"small",children:[Object(l.jsx)(p.a,{children:Object(l.jsxs)(y.a,{children:[Object(l.jsx)(x.a,{children:"Name"}),Object(l.jsx)(x.a,{children:"Platform"}),Object(l.jsx)(x.a,{children:"Level"}),Object(l.jsx)(x.a,{children:"Percentile"})]})}),Object(l.jsx)(D.a,{children:n})]})})})}var z=function(e){var t=window.lastDayJSON;function n(e,n){var a=b.DateTime.fromMillis(Object(N.parseDate)(e)).plus({days:n}),r=a.toUTC().toFormat("yyyy-MM-dd");return function(e){return h.a.includes(t.dates,e)}(r)?r:null}var a=Object(i.useState)(null),r=Object(j.a)(a,2),c=r[0],s=r[1],o=e.day;Object(i.useEffect)((function(){L("/processeddates/"+o+".json").then((function(e){return e.json()})).then((function(e){s(e)}))}),[o]);var d=function(e){return n(e,-1)}(o),u=function(e){return n(e,1)}(o),x=d?Object(l.jsx)("a",{href:"?day="+d,children:"Previous Day"}):null,m=u?Object(l.jsx)("a",{href:"?day="+u,children:"Next Day"}):null;return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsxs)("header",{children:[Object(l.jsxs)("div",{className:"main",children:["Daily Challenge for ",o]}),Object(l.jsxs)("div",{className:"subtitle",children:["Data Provided by "," ",Object(l.jsx)("a",{href:"http://vdzserver.org/spelunky2",children:"http://vdzserver.org/spelunky2"})]}),Object(l.jsxs)("nav",{className:"day-nav",children:[x,m]})]}),Object(l.jsx)("div",{className:"histogram-wrapper",children:Object(l.jsx)(M,{dayData:c})}),Object(l.jsx)(T,{dayData:c})]})},C=(n(107),n(64)),E=n.n(C);var J=function(e){var t=Object(i.useState)(null),n=Object(j.a)(t,2),a=n[0],r=n[1],c=e.player;if(Object(i.useEffect)((function(){var e=E()(c),t=e.charAt(0);fetch("/spelunky2daily"+"/players/".concat(t,"/").concat(e,".json")).then((function(e){return e.json()})).then((function(e){r(e)}))}),[c]),!a)return null;function s(e,t){return Object(l.jsxs)(y.a,{children:[Object(l.jsx)(x.a,{children:e}),Object(l.jsx)(x.a,{children:t})]})}var o,d=[s("Best Rank","".concat(a.rankSummary.min," (").concat(a.percentileSummary.max.toFixed(2),")%")),s("Median Rank","".concat(a.rankSummary.median," (").concat(a.percentileSummary.median.toFixed(2),")%"))],u=h.a.map(a.scoreData,(function(e,t){return function(e,t){return Object(l.jsxs)(y.a,{children:[Object(l.jsx)(x.a,{children:e}),Object(l.jsx)(x.a,{children:t.level}),Object(l.jsx)(x.a,{children:t.score}),Object(l.jsx)(x.a,{children:(t.runframes/60).toFixed(3)}),Object(l.jsx)(x.a,{children:t.rank}),Object(l.jsx)(x.a,{children:t.percentile.toFixed(2)})]})}(t,e)})),b={credits:{enabled:!1},chart:{type:"spline"},title:{text:"Depth Over Time"},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%m-%d}: {point.y}"},xAxis:{type:"datetime",title:{text:"Daily"}},yAxis:{title:{text:"Depth (floors reached)"},min:0},series:[{data:(o=a.scoreData,h.a.map(o,(function(e,t){return[Object(N.parseDate)(t),e.level]})).reverse())}]},m=function(){return Object(l.jsx)("div",{children:Object(l.jsx)(k.a,{highcharts:S.a,options:b})})};return Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"title",children:a.name}),Object(l.jsx)(f.a,{children:Object(l.jsx)(D.a,{children:d})}),Object(l.jsx)(m,{}),Object(l.jsxs)(f.a,{children:[Object(l.jsxs)(p.a,{children:[Object(l.jsx)(x.a,{children:"date"}),Object(l.jsx)(x.a,{children:"level"}),Object(l.jsx)(x.a,{children:"score"}),Object(l.jsx)(x.a,{children:"time"}),Object(l.jsx)(x.a,{children:"rank"}),Object(l.jsx)(x.a,{children:"percentile"})]}),Object(l.jsx)(D.a,{children:u})]})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,125)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,l=t.getTTFB;n(e),a(e),r(e),c(e),l(e)}))};function B(){return(B=Object(c.a)(r.a.mark((function e(){var t,n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/latest-date.json").then((function(e){return e.json()}));case 2:window.lastDayJSON=e.sent,t=new URLSearchParams(window.location.search),a=t.get("player"),c=t.get("day")||window.lastDayJSON.date,n=a?Object(l.jsx)(J,{player:a}):Object(l.jsx)(z,{day:c}),d.a.render(Object(l.jsx)(s.a.StrictMode,{children:n}),document.getElementById("root"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){B.apply(this,arguments)}(),R()},19:function(e,t,n){var a=n(82).DateTime;var r=new RegExp("[^A-Za-z0-9\\-_]","g");e.exports={parseDate:function(e){return a.fromFormat(e,"yyyy-MM-dd").valueOf()},getLevelDefinition:function(e){return e<=4?{world:1,sublevel:e,worldName:"dwelling"}:e<=8?{world:2,sublevel:e-4,worldName:"volcana/jungle"}:9===e?{world:3,sublevel:1,worldName:"olmec"}:e<=13?{world:4,sublevel:e-9,worldName:"tidepool/temple"}:e<=14?{world:5,sublevel:1,worldName:"icecaves"}:e<=18?{world:6,sublevel:e-14,worldName:"neobabylon"}:e<=22?{world:7,sublevel:e-18,worldName:"sunkencity"}:{world:7,sublevel:e-18,worldName:"cosmic ocean"}},getPlayerName:function(e){return e?e.replace(r,"__"):""}}},78:function(e,t,n){},79:function(e,t,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.cfec5fbe.chunk.js.map