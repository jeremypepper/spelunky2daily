(this["webpackJsonpspelunky2-daily-leaderboards"]=this["webpackJsonpspelunky2-daily-leaderboards"]||[]).push([[0],{109:function(e,t,n){},110:function(e,t,n){"use strict";n.r(t);var a=n(47),r=n.n(a),c=n(57),i=n(2),s=n(1),l=n.n(s),o=n(58),d=n.n(o),j=(n(78),n(40)),u=(n(79),n(10)),h=n.n(u),b=n(63),x=n(126),O=n(121),f=n(122),m=n(123),p=n(124),y=n(120),v=n(59),w=n.n(v),D=n(125),g=n(16),k=n(33),N=n.n(k),S=n(26),F=n.n(S);function P(e){var t=function(e){return e.level}(e);return t>23?23:t}function M(e){if(!e.dayData)return null;for(var t,n=(t=e.dayData,h.a.countBy(t,P)),a=[0],r=h.a.max(h.a.keys(n).map((function(e){return Number.parseInt(e,10)}))),c=1;c<=r;c++)a[c]=n[c]||0;var s={chart:{type:"column"},title:{text:"Maximum World Reached"},credits:{enabled:!1},legend:{enabled:!1},yAxis:{title:{text:"Number of Players"}},xAxis:{min:1,max:23,tickPositions:[1,5,9,10,14,15,19,23],labels:{formatter:function(){var e=Object(g.getLevelDefinition)(this.value);return 23===this.value?"ocean":"".concat(e.toString())}},crosshair:!0},series:[{name:"WorldEntered",data:a}]},l=function(){return Object(i.jsx)("div",{children:Object(i.jsx)(N.a,{highcharts:F.a,options:s})})};return Object(i.jsx)(l,{})}var A="localhost"===window.location.hostname?"http://localhost:8010/proxy":"https://spelunky2daily.s3-us-west-2.amazonaws.com";function L(e){return fetch(A+e)}function T(e){var t=w()({table:{minWidth:650}})();if(!e.dayData)return null;var n=h.a.map(e.dayData,(function(e){var t=Object(g.getLevelDefinition)(e.level);return Object(i.jsxs)(y.a,{children:[Object(i.jsx)(x.a,{children:Object(i.jsx)("a",{href:"?player=".concat(e.name),children:e.name})}),Object(i.jsx)(x.a,{children:18===e.platform?"Steam":"Playstation"}),Object(i.jsx)(x.a,{children:t.toString()}),Object(i.jsx)(x.a,{children:e.percentile.toFixed(2)})]},e.id)}));return Object(i.jsx)("div",{children:Object(i.jsx)(O.a,{component:f.a,children:Object(i.jsxs)(m.a,{className:t.table,size:"small",children:[Object(i.jsx)(p.a,{children:Object(i.jsxs)(y.a,{children:[Object(i.jsx)(x.a,{children:"Name"}),Object(i.jsx)(x.a,{children:"Platform"}),Object(i.jsx)(x.a,{children:"Level"}),Object(i.jsx)(x.a,{children:"Percentile"})]})}),Object(i.jsx)(D.a,{children:n})]})})})}var z=function(e){var t=window.lastDayJSON;function n(e,n){var a=b.DateTime.fromMillis(Object(g.parseDate)(e)).plus({days:n}),r=a.toUTC().toFormat("yyyy-MM-dd");return function(e){return h.a.includes(t.dates,e)}(r)?r:null}var a=Object(s.useState)(null),r=Object(j.a)(a,2),c=r[0],l=r[1],o=e.day;Object(s.useEffect)((function(){L("/processeddates/"+o+".json").then((function(e){return e.json()})).then((function(e){l(e)}))}),[o]);var d=function(e){return n(e,-1)}(o),u=function(e){return n(e,1)}(o),x=d?Object(i.jsx)("a",{href:"?day="+d,children:"Previous Day"}):null,O=u?Object(i.jsx)("a",{href:"?day="+u,children:"Next Day"}):null;return Object(i.jsxs)("div",{className:"App",children:[Object(i.jsxs)("header",{children:[Object(i.jsxs)("div",{className:"main",children:["Daily Challenge for ",o]}),Object(i.jsxs)("div",{className:"subtitle",children:["Data Provided by "," ",Object(i.jsx)("a",{href:"http://vdzserver.org/spelunky2",children:"http://vdzserver.org/spelunky2"})]}),Object(i.jsxs)("nav",{className:"day-nav",children:[x,O]})]}),Object(i.jsx)("div",{className:"histogram-wrapper",children:Object(i.jsx)(M,{dayData:c})}),Object(i.jsx)(T,{dayData:c})]})},C=(n(109),n(64)),E=n.n(C);var J=function(e){var t=Object(s.useState)(null),n=Object(j.a)(t,2),a=n[0],r=n[1],c=e.player;if(Object(s.useEffect)((function(){var e=E()(c),t=e.charAt(0);fetch("/spelunky2daily"+"/players/".concat(t,"/").concat(e,".json")).then((function(e){return e.json()})).then((function(e){r(e)}))}),[c]),!a)return null;function l(e,t){return Object(i.jsxs)(y.a,{children:[Object(i.jsx)(x.a,{children:e}),Object(i.jsx)(x.a,{children:t})]})}var o,d=[l("Best Rank","".concat(a.rankSummary.min," (").concat(a.percentileSummary.max.toFixed(2),")%")),l("Median Rank","".concat(a.rankSummary.median," (").concat(a.percentileSummary.median.toFixed(2),")%"))],u=h.a.map(a.scoreData,(function(e,t){return function(e,t){return Object(i.jsxs)(y.a,{children:[Object(i.jsx)(x.a,{children:e}),Object(i.jsx)(x.a,{children:t.level}),Object(i.jsx)(x.a,{children:t.score}),Object(i.jsx)(x.a,{children:(t.runframes/60).toFixed(3)}),Object(i.jsx)(x.a,{children:t.rank}),Object(i.jsx)(x.a,{children:t.percentile.toFixed(2)})]})}(t,e)})),b={credits:{enabled:!1},chart:{type:"spline"},title:{text:"Depth Over Time"},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%m-%d}: {point.y}"},xAxis:{type:"datetime",title:{text:"Daily"}},yAxis:{title:{text:"Depth (floors reached)"},min:0},series:[{data:(o=a.scoreData,h.a.map(o,(function(e,t){return[Object(g.parseDate)(t),e.level]})).reverse())}]},O=function(){return Object(i.jsx)("div",{children:Object(i.jsx)(N.a,{highcharts:F.a,options:b})})};return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"title",children:a.name}),Object(i.jsx)(m.a,{children:Object(i.jsx)(D.a,{children:d})}),Object(i.jsx)(O,{}),Object(i.jsxs)(m.a,{children:[Object(i.jsxs)(p.a,{children:[Object(i.jsx)(x.a,{children:"date"}),Object(i.jsx)(x.a,{children:"level"}),Object(i.jsx)(x.a,{children:"score"}),Object(i.jsx)(x.a,{children:"time"}),Object(i.jsx)(x.a,{children:"rank"}),Object(i.jsx)(x.a,{children:"percentile"})]}),Object(i.jsx)(D.a,{children:u})]})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,127)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};function B(){return(B=Object(c.a)(r.a.mark((function e(){var t,n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("/latest-date.json").then((function(e){return e.json()}));case 2:window.lastDayJSON=e.sent,t=new URLSearchParams(window.location.search),a=t.get("player"),c=t.get("day")||window.lastDayJSON.date,n=a?Object(i.jsx)(J,{player:a}):Object(i.jsx)(z,{day:c}),d.a.render(Object(i.jsx)(l.a.StrictMode,{children:n}),document.getElementById("root"));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){B.apply(this,arguments)}(),R()},16:function(e,t,n){var a=n(82),r=n(83),c=n(84).DateTime;var i=new RegExp("[^A-Za-z0-9\\-_]","g");var s=function(){"use strict";function e(t,n,r,c){a(this,e),this.value=t,this.world=n,this.sublevel=r,this.worldName=c}return r(e,[{key:"toString",value:function(){return 23===this.value?"ocean":"".concat(this.world,"-").concat(this.sublevel)}}]),e}();e.exports={parseDate:function(e){return c.fromFormat(e,"yyyy-MM-dd").valueOf()},getLevelDefinition:function(e){return e<=4?new s(e,1,e,"dwelling"):e<=8?new s(e,2,e-4,"volcana/jungle"):9===e?new s(e,3,1,"olmec"):e<=13?new s(e,4,e-9,"tidepool/temple"):e<=14?new s(e,5,1,"icecaves"):e<=18?new s(e,6,e-14,"neobabylon"):new s(e,7,e-18,e<=22?"sunkencity":"cosmic ocean")},getPlayerName:function(e){return e?e.replace(i,"__"):""}}},78:function(e,t,n){},79:function(e,t,n){}},[[110,1,2]]]);
//# sourceMappingURL=main.62bac643.chunk.js.map