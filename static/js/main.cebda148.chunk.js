(this["webpackJsonpspelunky2-daily-leaderboards"]=this["webpackJsonpspelunky2-daily-leaderboards"]||[]).push([[0],{104:function(e,t,n){},105:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(1),c=n.n(r),l=n(58),i=n.n(l),s=(n(76),n(41)),d=(n(77),n(10)),o=n.n(d),j=n(46),u=n(121),b=n(116),h=n(117),x=n(118),m=n(119),O=n(115),f=n(59),v=n.n(f),y=n(120),p=n(34),w=n(20),D=n(27),g=n.n(D),N=n(18),k=n.n(N);function F(e){var t=function(e){return e.level}(e);return t>23?23:t}function S(e){if(!e.dayData)return null;for(var t,n=(t=e.dayData,o.a.countBy(t,F)),r=[0],c=o.a.max(o.a.keys(n).map((function(e){return Number.parseInt(e,10)}))),l=1;l<=c;l++)r[l]=n[l]||0;var i={chart:{type:"column"},title:{text:"Maximum World Reached"},credits:{enabled:!1},legend:{enabled:!1},yAxis:{title:"Number of Players"},xAxis:{min:1,max:23,labels:{formatter:function(){var e=Object(w.getLevelDefinition)(this.value);return 23===this.value?"ocean":"".concat(e.world,"-").concat(e.sublevel)}},crosshair:!0},series:[{name:"WorldEntered",data:r}]},s=function(){return Object(a.jsx)("div",{children:Object(a.jsx)(g.a,{highcharts:k.a,options:i})})};return Object(a.jsx)(s,{})}function P(e,t){var n=j.DateTime.fromMillis(Object(w.parseDate)(e)).plus({days:t}),a=n.toUTC().toFormat("yyyy-MM-dd");return function(e){return o.a.includes(p.dates,e)}(a)?a:null}function M(e){var t=v()({table:{minWidth:650}})();if(!e.dayData)return null;var n=o.a.map(e.dayData,(function(e){return Object(a.jsxs)(O.a,{children:[Object(a.jsx)(u.a,{children:Object(a.jsx)("a",{href:"?player=".concat(e.name),children:e.name})}),Object(a.jsx)(u.a,{children:18===e.platform?"Steam":"Playstation"}),Object(a.jsx)(u.a,{children:e.level}),Object(a.jsx)(u.a,{children:e.percentile.toFixed(2)})]},e.id)}));return Object(a.jsx)("div",{children:Object(a.jsx)(b.a,{component:h.a,children:Object(a.jsxs)(x.a,{className:t.table,size:"small",children:[Object(a.jsx)(m.a,{children:Object(a.jsxs)(O.a,{children:[Object(a.jsx)(u.a,{children:"Name"}),Object(a.jsx)(u.a,{children:"Platform"}),Object(a.jsx)(u.a,{children:"Level"}),Object(a.jsx)(u.a,{children:"Percentile"})]})}),Object(a.jsx)(y.a,{children:n})]})})})}var A=function(e){var t=Object(r.useState)(null),n=Object(s.a)(t,2),c=n[0],l=n[1],i=e.day;Object(r.useEffect)((function(){fetch("/spelunky2daily/processeddates/"+i+".json").then((function(e){return e.json()})).then((function(e){l(e)}))}),[i]);var d=function(e){return P(e,-1)}(i),o=function(e){return P(e,1)}(i),j=d?Object(a.jsx)("a",{href:"?day="+d,children:"Previous Day"}):null,u=o?Object(a.jsx)("a",{href:"?day="+o,children:"Next Day"}):null;return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)("header",{children:[Object(a.jsxs)("div",{className:"main",children:["Daily Challenge for ",i]}),Object(a.jsxs)("div",{className:"subtitle",children:["Data Provided by "," ",Object(a.jsx)("a",{href:"http://vdzserver.org/spelunky2",children:"http://vdzserver.org/spelunky2"})]}),Object(a.jsxs)("nav",{className:"day-nav",children:[j,u]})]}),Object(a.jsx)("div",{className:"histogram-wrapper",children:Object(a.jsx)(S,{dayData:c})}),Object(a.jsx)(M,{dayData:c})]})},L=(n(104),n(63)),T=n.n(L);var C,E=function(e){var t=Object(r.useState)(null),n=Object(s.a)(t,2),c=n[0],l=n[1],i=e.player;if(Object(r.useEffect)((function(){var e=T()(i),t=e.charAt(0);fetch("/spelunky2daily"+"/players/".concat(t,"/").concat(e,".json")).then((function(e){return e.json()})).then((function(e){l(e)}))}),[i]),!c)return null;function d(e,t){return Object(a.jsxs)(O.a,{children:[Object(a.jsx)(u.a,{children:e}),Object(a.jsx)(u.a,{children:t})]})}var j,b=[d("Best Rank","".concat(c.rankSummary.min," (").concat(c.percentileSummary.max.toFixed(2),")%")),d("Median Rank","".concat(c.rankSummary.median," (").concat(c.percentileSummary.median.toFixed(2),")%"))],h=o.a.map(c.scoreData,(function(e,t){return function(e,t){return Object(a.jsxs)(O.a,{children:[Object(a.jsx)(u.a,{children:e}),Object(a.jsx)(u.a,{children:t.level}),Object(a.jsx)(u.a,{children:t.score}),Object(a.jsx)(u.a,{children:(t.runframes/60).toFixed(3)}),Object(a.jsx)(u.a,{children:t.rank}),Object(a.jsx)(u.a,{children:t.percentile.toFixed(2)})]})}(t,e)})),f={credits:{enabled:!1},chart:{type:"spline"},title:{text:"Depth Over Time"},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%m-%d}: {point.y}"},xAxis:{type:"datetime",title:{text:"Daily"}},yAxis:{title:{text:"Depth (floors reached)"},min:0},series:[{data:(j=c.scoreData,o.a.map(j,(function(e,t){return[Object(w.parseDate)(t),e.level]})).reverse())}]},v=function(){return Object(a.jsx)("div",{children:Object(a.jsx)(g.a,{highcharts:k.a,options:f})})};return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"title",children:c.name}),Object(a.jsx)(x.a,{children:Object(a.jsx)(y.a,{children:b})}),Object(a.jsx)(v,{}),Object(a.jsxs)(x.a,{children:[Object(a.jsxs)(m.a,{children:[Object(a.jsx)(u.a,{children:"date"}),Object(a.jsx)(u.a,{children:"level"}),Object(a.jsx)(u.a,{children:"score"}),Object(a.jsx)(u.a,{children:"time"}),Object(a.jsx)(u.a,{children:"rank"}),Object(a.jsx)(u.a,{children:"percentile"})]}),Object(a.jsx)(y.a,{children:h})]})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,122)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,l=t.getTTFB;n(e),a(e),r(e),c(e),l(e)}))},z=new URLSearchParams(window.location.search),B=z.get("player"),I=z.get("day")||p.date;C=B?Object(a.jsx)(E,{player:B}):Object(a.jsx)(A,{day:I}),i.a.render(Object(a.jsx)(c.a.StrictMode,{children:C}),document.getElementById("root")),R()},20:function(e,t,n){var a=n(46).DateTime;var r=new RegExp("[^A-Za-z0-9\\-_]","g");e.exports={parseDate:function(e){return a.fromFormat(e,"yyyy-MM-dd").valueOf()},getLevelDefinition:function(e){return e<=4?{world:1,sublevel:e,worldName:"dwelling"}:e<=8?{world:2,sublevel:e-4,worldName:"volcana/jungle"}:9===e?{world:3,sublevel:1,worldName:"olmec"}:e<=13?{world:4,sublevel:e-9,worldName:"tidepool/temple"}:e<=14?{world:5,sublevel:1,worldName:"icecaves"}:e<=18?{world:6,sublevel:e-14,worldName:"neobabylon"}:e<=22?{world:7,sublevel:e-18,worldName:"sunkencity"}:{world:7,sublevel:e-18,worldName:"cosmic ocean"}},getPlayerName:function(e){return e.replace(r,"__")}}},34:function(e){e.exports=JSON.parse('{"date":"2020-11-22","dates":["2020-11-22","2020-11-21","2020-11-20","2020-11-19","2020-11-18","2020-11-17","2020-11-16","2020-11-15","2020-11-14","2020-11-13","2020-11-12","2020-11-11","2020-11-10","2020-11-09","2020-11-08","2020-11-07","2020-11-06","2020-11-05","2020-11-04","2020-11-03","2020-11-02","2020-11-01","2020-10-31","2020-10-30","2020-10-29","2020-10-28","2020-10-27","2020-10-26","2020-10-25","2020-10-24","2020-10-23","2020-10-22","2020-10-21","2020-10-20","2020-10-19","2020-10-18","2020-10-17","2020-10-16","2020-10-15","2020-10-14","2020-10-13","2020-10-12","2020-10-11","2020-10-10","2020-10-09","2020-10-08","2020-10-07","2020-10-06","2020-10-05","2020-10-04","2020-10-03","2020-10-02","2020-10-01","2020-09-30","2020-09-29","2020-09-28","2020-09-27","2020-09-26","2020-09-25","2020-09-24","2020-09-23","2020-09-22","2020-09-21","2020-09-20","2020-09-19","2020-09-18","2020-09-17","2020-09-16","2020-09-15","2020-09-14"]}')},76:function(e,t,n){},77:function(e,t,n){}},[[105,1,2]]]);
//# sourceMappingURL=main.cebda148.chunk.js.map