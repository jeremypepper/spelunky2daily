(this["webpackJsonpspelunky2-daily-leaderboards"]=this["webpackJsonpspelunky2-daily-leaderboards"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n(1),r=n.n(c),i=n(57),l=n.n(i),s=(n(75),n(41)),d=(n(76),n(14)),j=n.n(d),o=n(33),u=n(120),h=n(115),b=n(116),x=n(117),O=n(118),m=n(114),y=n(58),f=n.n(y),p=n(119),v=n(32);function D(e){return o.DateTime.fromFormat(e,"yyyy-MM-dd").valueOf()}var g=n(34),k=n.n(g),F=n(25),S=n.n(F);function N(e,t){var n=o.DateTime.fromMillis(D(e)).plus({days:t}),a=n.toUTC().toFormat("yyyy-MM-dd");return function(e){return j.a.includes(v.dates,e)}(a)?a:null}function P(e){if(!e.dayData)return null;var t,n={chart:{type:"column"},title:{text:"Maximum World Reached"},credits:{enabled:!1},xAxis:{categories:["Dwelling","Volcana/Jungle","Olmec","Tide Pool/Temple","Ice Caves","Neo Babylon","Sunken City","Cosmic Ocean"],crosshair:!0},series:[{name:"WorldEntered",data:j.a.map((t=e.dayData,j.a.countBy(t,(function(e){return e.level<=4?1:e.level<=8?2:9===e.level?3:e.level<=13?4:e.level<=14?5:e.level<=18?6:e.level<=22?7:8}))),(function(e){return e}))}]},c=function(){return Object(a.jsx)("div",{children:Object(a.jsx)(k.a,{highcharts:S.a,options:n})})};return Object(a.jsx)(c,{})}function C(e){var t=f()({table:{minWidth:650}})();if(!e.dayData)return null;var n=j.a.map(e.dayData,(function(e){return Object(a.jsxs)(m.a,{children:[Object(a.jsx)(u.a,{children:Object(a.jsx)("a",{href:"?player=".concat(e.name),children:e.name})}),Object(a.jsx)(u.a,{children:18===e.platform?"Steam":"Playstation"}),Object(a.jsx)(u.a,{children:e.level}),Object(a.jsx)(u.a,{children:e.percentile.toFixed(2)})]},e.id)}));return Object(a.jsx)("div",{children:Object(a.jsx)(h.a,{component:b.a,children:Object(a.jsxs)(x.a,{className:t.table,size:"small",children:[Object(a.jsx)(O.a,{children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(u.a,{children:"Name"}),Object(a.jsx)(u.a,{children:"Platform"}),Object(a.jsx)(u.a,{children:"Level"}),Object(a.jsx)(u.a,{children:"Percentile"})]})}),Object(a.jsx)(p.a,{children:n})]})})})}var M=function(e){var t=Object(c.useState)(null),n=Object(s.a)(t,2),r=n[0],i=n[1],l=e.day;Object(c.useEffect)((function(){fetch("/spelunky2daily/processeddates/"+l+".json").then((function(e){return e.json()})).then((function(e){i(e)}))}),[l]);var d=function(e){return N(e,-1)}(l),j=function(e){return N(e,1)}(l),o=d?Object(a.jsx)("a",{href:"?day="+d,children:"Previous Day"}):null,u=j?Object(a.jsx)("a",{href:"?day="+j,children:"Next Day"}):null;return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)("header",{children:[Object(a.jsxs)("div",{className:"main",children:["Daily Challenge for ",l]}),Object(a.jsxs)("div",{className:"subtitle",children:["Data Provided by "," ",Object(a.jsx)("a",{href:"http://vdzserver.org/spelunky2",children:"http://vdzserver.org/spelunky2"})]}),Object(a.jsxs)("nav",{className:"day-nav",children:[o,u]})]}),Object(a.jsx)("div",{className:"histogram-wrapper",children:Object(a.jsx)(P,{dayData:r})}),Object(a.jsx)(C,{dayData:r})]})},T=(n(103),n(62)),w=n.n(T);var A,B=function(e){var t=Object(c.useState)(null),n=Object(s.a)(t,2),r=n[0],i=n[1],l=e.player;if(Object(c.useEffect)((function(){var e=w()(l),t=e.charAt(0);fetch("/spelunky2daily"+"/players/".concat(t,"/").concat(e,".json")).then((function(e){return e.json()})).then((function(e){i(e)}))}),[l]),!r)return null;function d(e,t){return Object(a.jsxs)(m.a,{children:[Object(a.jsx)(u.a,{children:e}),Object(a.jsx)(u.a,{children:t})]})}var o,h=[d("Best Rank","".concat(r.rankSummary.min," (").concat(r.percentileSummary.max.toFixed(2),")%")),d("Median Rank","".concat(r.rankSummary.median," (").concat(r.percentileSummary.median.toFixed(2),")%"))],b=j.a.map(r.scoreData,(function(e,t){return function(e,t){return Object(a.jsxs)(m.a,{children:[Object(a.jsx)(u.a,{children:e}),Object(a.jsx)(u.a,{children:t.level}),Object(a.jsx)(u.a,{children:t.score}),Object(a.jsx)(u.a,{children:(t.runframes/60).toFixed(3)}),Object(a.jsx)(u.a,{children:t.rank}),Object(a.jsx)(u.a,{children:t.percentile.toFixed(2)})]})}(t,e)})),y={credits:{enabled:!1},chart:{type:"spline"},title:{text:"Depth Over Time"},tooltip:{headerFormat:"<b>{series.name}</b><br>",pointFormat:"{point.x:%m-%d}: {point.y}"},xAxis:{type:"datetime",title:{text:"Daily"}},yAxis:{title:{text:"Depth (floors reached)"},min:0},series:[{data:(o=r.scoreData,j.a.map(o,(function(e,t){return[D(t),e.level]})).reverse())}]},f=function(){return Object(a.jsx)("div",{children:Object(a.jsx)(k.a,{highcharts:S.a,options:y})})};return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"title",children:r.name}),Object(a.jsx)(x.a,{children:Object(a.jsx)(p.a,{children:h})}),Object(a.jsx)(f,{}),Object(a.jsxs)(x.a,{children:[Object(a.jsxs)(O.a,{children:[Object(a.jsx)(u.a,{children:"date"}),Object(a.jsx)(u.a,{children:"level"}),Object(a.jsx)(u.a,{children:"score"}),Object(a.jsx)(u.a,{children:"time"}),Object(a.jsx)(u.a,{children:"rank"}),Object(a.jsx)(u.a,{children:"percentile"})]}),Object(a.jsx)(p.a,{children:b})]})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,121)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},J=new URLSearchParams(window.location.search),L=J.get("player"),R=J.get("day")||v.date;A=L?Object(a.jsx)(B,{player:L}):Object(a.jsx)(M,{day:R}),l.a.render(Object(a.jsx)(r.a.StrictMode,{children:A}),document.getElementById("root")),E()},32:function(e){e.exports=JSON.parse('{"date":"2020-11-19","dates":["2020-11-19","2020-11-18","2020-11-17","2020-11-16","2020-11-15","2020-11-14","2020-11-13","2020-11-12","2020-11-11","2020-11-10","2020-11-09","2020-11-08","2020-11-07","2020-11-06","2020-11-05","2020-11-04","2020-11-03","2020-11-02","2020-11-01","2020-10-31","2020-10-30","2020-10-29","2020-10-28","2020-10-27","2020-10-26","2020-10-25","2020-10-24","2020-10-23","2020-10-22","2020-10-21","2020-10-20","2020-10-19","2020-10-18","2020-10-17","2020-10-16","2020-10-15","2020-10-14","2020-10-13","2020-10-12","2020-10-11","2020-10-10","2020-10-09","2020-10-08","2020-10-07","2020-10-06","2020-10-05","2020-10-04","2020-10-03","2020-10-02","2020-10-01","2020-09-30","2020-09-29","2020-09-28","2020-09-27","2020-09-26","2020-09-25","2020-09-24","2020-09-23","2020-09-22","2020-09-21","2020-09-20","2020-09-19","2020-09-18","2020-09-17","2020-09-16","2020-09-15","2020-09-14"]}')},75:function(e,t,n){},76:function(e,t,n){}},[[104,1,2]]]);
//# sourceMappingURL=main.741662e6.chunk.js.map